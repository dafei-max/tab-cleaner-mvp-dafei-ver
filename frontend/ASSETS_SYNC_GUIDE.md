# Assets æ–‡ä»¶åŒæ­¥æŒ‡å—

## ğŸ“‹ å½“å‰æƒ…å†µ

**é—®é¢˜**ï¼š`public/assets/` å’Œ `dist/assets/` **æ²¡æœ‰è‡ªåŠ¨åŒæ­¥**

- `public/assets/` - æºä»£ç ç›®å½•ï¼ˆä½ ä¿®æ”¹çš„åœ°æ–¹ï¼‰
- `dist/assets/` - æ„å»ºè¾“å‡ºç›®å½•ï¼ˆChrome æ‰©å±•å®é™…ä½¿ç”¨çš„ï¼‰

## ğŸ” ä¸ºä»€ä¹ˆä¸åŒæ­¥ï¼Ÿ

Vite çš„ `publicDir: "./public"` é…ç½®ä¼šåœ¨**æ„å»ºæ—¶**å°† `public/` ç›®å½•å¤åˆ¶åˆ° `dist/`ï¼Œä½†ï¼š
- âŒ **ä¸æ˜¯å®æ—¶åŒæ­¥**ï¼šä¿®æ”¹ `public/assets/` åï¼Œ`dist/assets/` ä¸ä¼šè‡ªåŠ¨æ›´æ–°
- âœ… **éœ€è¦æ‰‹åŠ¨æ„å»º**ï¼šè¿è¡Œ `npm run build` æ‰ä¼šåŒæ­¥

## âœ… è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆ 1: å¿«é€ŸåŒæ­¥ï¼ˆæ¨èï¼‰

ä¿®æ”¹ `public/assets/` åï¼Œè¿è¡Œï¼š

```bash
npm run sync-assets
```

è¿™ä¼šå¿«é€ŸåŒæ­¥æ‰€æœ‰ assets æ–‡ä»¶åˆ° `dist/assets/`ï¼Œæ— éœ€å®Œæ•´æ„å»ºã€‚

### æ–¹æ¡ˆ 2: è‡ªåŠ¨ç›‘å¬åŒæ­¥ï¼ˆå¼€å‘æ—¶ï¼‰

åœ¨å¼€å‘æ—¶ï¼Œå¯ä»¥å¯åŠ¨ç›‘å¬æ¨¡å¼ï¼š

```bash
npm run watch-assets
```

è¿™ä¼šç›‘å¬ `public/assets/` ç›®å½•çš„å˜åŒ–ï¼Œè‡ªåŠ¨åŒæ­¥åˆ° `dist/assets/`ã€‚

### æ–¹æ¡ˆ 3: å®Œæ•´æ„å»º

å¦‚æœéœ€è¦å®Œæ•´æ„å»ºï¼ˆåŒ…æ‹¬ React åº”ç”¨ï¼‰ï¼š

```bash
npm run build:full
```

è¿™ä¼šå…ˆåŒæ­¥ assetsï¼Œç„¶åæ„å»º React åº”ç”¨ã€‚

## ğŸ“ å·¥ä½œæµç¨‹å»ºè®®

### å¼€å‘æ—¶ï¼ˆä¿®æ”¹ assets æ–‡ä»¶ï¼‰

1. **ä¿®æ”¹ `public/assets/` ä¸­çš„æ–‡ä»¶**ï¼ˆå¦‚ `background.js`, `content.js` ç­‰ï¼‰
2. **è¿è¡ŒåŒæ­¥å‘½ä»¤**ï¼š
   ```bash
   npm run sync-assets
   ```
3. **åœ¨ Chrome æ‰©å±•ç®¡ç†é¡µé¢ç‚¹å‡»"é‡æ–°åŠ è½½"**
4. **åˆ·æ–°ç½‘é¡µæŸ¥çœ‹æ•ˆæœ**

### å¼€å‘æ—¶ï¼ˆä½¿ç”¨ç›‘å¬æ¨¡å¼ï¼‰

1. **å¯åŠ¨ç›‘å¬**ï¼š
   ```bash
   npm run watch-assets
   ```
2. **ä¿®æ”¹ `public/assets/` ä¸­çš„æ–‡ä»¶**
3. **æ–‡ä»¶ä¼šè‡ªåŠ¨åŒæ­¥åˆ° `dist/assets/`**
4. **åœ¨ Chrome æ‰©å±•ç®¡ç†é¡µé¢ç‚¹å‡»"é‡æ–°åŠ è½½"**

### ç”Ÿäº§æ„å»º

```bash
npm run build:full
```

è¿™ä¼šï¼š
1. åŒæ­¥æ‰€æœ‰ assets æ–‡ä»¶
2. æ„å»º React åº”ç”¨
3. ç”Ÿæˆå®Œæ•´çš„ `dist/` ç›®å½•

## ğŸ” æ£€æŸ¥åŒæ­¥çŠ¶æ€

### æ£€æŸ¥æ–‡ä»¶æ˜¯å¦åŒæ­¥

```bash
# æ¯”è¾ƒæ–‡ä»¶ä¿®æ”¹æ—¶é—´
stat -f "%Sm %N" -t "%Y-%m-%d %H:%M:%S" public/assets/background.js dist/assets/background.js

# æ¯”è¾ƒæ–‡ä»¶å†…å®¹
diff public/assets/background.js dist/assets/background.js
```

### æŸ¥çœ‹å“ªäº›æ–‡ä»¶éœ€è¦åŒæ­¥

```bash
npm run sync-assets
```

è„šæœ¬ä¼šæ˜¾ç¤ºå“ªäº›æ–‡ä»¶è¢«åŒæ­¥äº†ï¼Œå“ªäº›è¢«è·³è¿‡äº†ï¼ˆå› ä¸ºå·²ç»æ˜¯æœ€æ–°çš„ï¼‰ã€‚

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **Chrome æ‰©å±•ä½¿ç”¨çš„æ˜¯ `dist/` ç›®å½•**ï¼Œä¸æ˜¯ `public/` ç›®å½•
2. **ä¿®æ”¹ `public/assets/` åå¿…é¡»åŒæ­¥åˆ° `dist/assets/`**ï¼Œå¦åˆ™ä¿®æ”¹ä¸ä¼šç”Ÿæ•ˆ
3. **React åº”ç”¨æ„å»º**ï¼ˆ`npm run build`ï¼‰ä¼šè‡ªåŠ¨å¤åˆ¶ `public/` åˆ° `dist/`ï¼Œä½†åªä¼šåœ¨æ„å»ºæ—¶æ‰§è¡Œ
4. **å¿«é€Ÿå¼€å‘æ—¶**ï¼Œä½¿ç”¨ `npm run sync-assets` æ›´å¿«ï¼Œæ— éœ€å®Œæ•´æ„å»º

## ğŸ¯ æ¨èå·¥ä½œæµ

### åœºæ™¯ 1: åªä¿®æ”¹ assets æ–‡ä»¶ï¼ˆbackground.js, content.js ç­‰ï¼‰

```bash
# 1. ä¿®æ”¹ public/assets/xxx.js
# 2. åŒæ­¥
npm run sync-assets
# 3. åœ¨ Chrome æ‰©å±•ç®¡ç†é¡µé¢é‡æ–°åŠ è½½
```

### åœºæ™¯ 2: ä¿®æ”¹ React åº”ç”¨ï¼ˆPersonalSpace ç­‰ï¼‰

```bash
# 1. ä¿®æ”¹ src/ ä¸­çš„æ–‡ä»¶
# 2. æ„å»ºï¼ˆä¼šè‡ªåŠ¨åŒæ­¥ assetsï¼‰
npm run build
# 3. åœ¨ Chrome æ‰©å±•ç®¡ç†é¡µé¢é‡æ–°åŠ è½½
```

### åœºæ™¯ 3: åŒæ—¶ä¿®æ”¹ assets å’Œ React åº”ç”¨

```bash
# 1. ä¿®æ”¹æ–‡ä»¶
# 2. å®Œæ•´æ„å»º
npm run build:full
# 3. åœ¨ Chrome æ‰©å±•ç®¡ç†é¡µé¢é‡æ–°åŠ è½½
```

